<!DOCTYPE html>
<meta charset=utf-8>
<title>A Form of Madness - Dive Into HTML5</title>
<!--[if IE]><script src=j/html5.js></script><![endif]-->
<link rel="shortcut icon" href=favicon.ico>
<link rel=alternate type=application/atom+xml href=http://hg.diveintohtml5.org/hgweb.cgi/atom-log>
<link rel=stylesheet href=screen.css>
<style>
body{counter-reset:h1 10}
</style>
<div id=zz>
<p>You are here: <a href=index.html>Home</a> <span class=u>&#8227;</span> <a href=table-of-contents.html#forms>Dive Into <abbr>HTML5</abbr></a> <span class=u>&#8227;</span>
<h1>A Form of Madness</h1>
<p id=toc>&nbsp;
<p class=a>&#x2042;
<h2 id=divingin>Diving In</h2>

<p class=f><img src=i/aoc-e.png alt=E width=107 height=105>verybody knows about web forms, right? Make a <code>&lt;form></code>, a few <code>&lt;input type="text"></code> elements, maybe an <code>&lt;input type="password"></code>, finish it off with an <code>&lt;input type="submit"></code> button, and you&#8217;re done.

<p>You don&#8217;t know the half of it. <abbr>HTML5</abbr> defines over a dozen new input types that you can use in your forms. And when I say &#8220;use,&#8221; I mean you can use them right now &mdash; without any shims, hacks, or workarounds. Now don&#8217;t get too excited; I don&#8217;t mean to say that all of these exciting new features are actually supported in every browser. Oh goodness no, I don&#8217;t mean that at all. In modern browsers, yes, your forms will kick all kinds of ass. But in legacy browsers, your forms will still work, albeit with less ass kicking. Which is to say, all of these features degrade gracefully in every browser. Even IE 6.

<!--
<p class=ss style="width:261px"><img src=i/openclipart.org_johnny_automatic_typewriter.png alt="manual typewriter" width=261 height=228><br><span id=live-input-types></span>
-->

<p class=a>&#x2042;

<h2 id=placeholder>Placeholder Text</h2>

<p>The first improvement <abbr>HTML5</abbr> brings to web forms is the ability to set <a href=http://www.whatwg.org/specs/web-apps/current-work/multipage/forms.html#the-placeholder-attribute>placeholder text in an input field</a>. Placeholder text is displayed inside the input field as long as the field is empty and not focused. As soon you click on (or tab to) the input field, the placeholder text disappears.

<p>You&#8217;ve probably seen placeholder text before. For example, Mozilla Firefox 3.5 now includes placeholder text in the location bar that reads &#8220;Search Bookmarks and History&#8221;:

<blockquote>
<p><img src=i/location-bar-empty-unfocused.png alt="location bar with placeholder text" width=268 height=30>
</blockquote>

<p>When you click on (or tab to) the location bar, the placeholder text disappears:

<blockquote>
<p><img src=i/location-bar-empty-focused.png alt="location bar with cursor and no placeholder text" width=268 height=30>
</blockquote>

<p>Ironically, Firefox 3.5 does not support adding placeholder text to your own web forms. C&#8217;est la vie.

<table class=bc>
<caption>Placeholder support</caption>
<thead>
<tr><th title="Internet Explorer 8">IE8<th title="Internet Explorer 7">IE7<th title="Firefox 3.5">Fx3.5<th title="Firefox 3.0">Fx3.0<th title="Safari 4">Saf4<th title="Safari 3">Saf3<th title="Google Chrome 3">Chrome<th title="Opera 10">Opera
</thead>
<tbody>
<tr><td>&middot;<td>&middot;<td>&middot;<td>&middot;<td>&#x2713;<td>&middot;<td>&#x2713;<td>&middot;
</tbody>
</table>

<p>Here&#8217;s how you can include placeholder text in your own web forms:

<pre><code>&lt;form>
  &lt;input name="q" <mark>placeholder="Search Bookmarks and History"</mark>>
  &lt;input type="submit" value="Search">
&lt;/form></code></pre>

<p>Browsers that don&#8217;t support the <code>placeholder</code> attribute will simply ignore it. No harm, no foul. <a href=examples/input-placeholder.html>See whether your browser supports placeholder text</a>.

<div class="pf clear">
<h4>Ask Professor Markup</h4>
<div class=inner>
<blockquote class=note>
<p><span>&#x261E;</span>Q: Can I use <abbr>HTML</abbr> markup in the <code>placeholder</code> attribute? I want to insert an image, or maybe change the colors.<br>
A: No, the <code>placeholder</code> attribute can only contain text.
</blockquote>
</div>
</div>

<p class=a>&#x2042;

<h2 id=autofocus>Autofocus Fields</h2>

<p class=ss><img src=i/openclipart.org_johnny_automatic_angry_guy.png alt="angry guy with arms up" width=188 height=262>

<p>Many web sites use JavaScript to focus the first input field of a web form automatically. For example, the home page of <a href=http://www.google.com/>Google.com</a> will autofocus the input box so you can type your search keywords. While this is convenient for most people, it can be annoying for power users or people with special needs. If you press the space bar expecting to scroll the page, the page will not scroll because the focus is already in a form input field. (It types a space in the field instead of scrolling.) If you focus a different input field while the page is still loading, the site&#8217;s autofocus script may &#8220;helpfully&#8221; move the focus back to the original input field, disrupting your flow and causing you to type in the wrong place.

<p>Because the autofocusing is done with JavaScript, it can be tricky to handle all of these edge cases, and there is little recourse for people who don&#8217;t want a web page to &#8220;steal&#8221; the focus.

<p>To solve this problem, <abbr>HTML5</abbr> introduces <a href=http://www.whatwg.org/specs/web-apps/current-work/multipage/forms.html#autofocusing-a-form-control>an <code>autofocus</code> attribute on all web form controls</a>. The <code>autofocus</code> attribute does exactly what it says on the tin: as soon as the page loads, it moves the input focus to a particular input field. But because it&#8217;s just markup instead of script, the behavior will be consistent across all web sites. Also, browser vendors (or extension authors) can offer users a way to disable the autofocusing behavior.

<table class=bc>
<caption>Autofocus support</caption>
<thead>
<tr><th title="Internet Explorer 8">IE8<th title="Internet Explorer 7">IE7<th title="Firefox 3.5">Fx3.5<th title="Firefox 3.0">Fx3.0<th title="Safari 4">Saf4<th title="Safari 3">Saf3<th title="Google Chrome 3">Chrome<th title="Opera 10">Opera
</thead>
<tbody>
<tr><td>&middot;<td>&middot;<td>&middot;<td>&middot;<td>&#x2713;<td>&middot;<td>&#x2713;<td>&#x2713;
</tbody>
</table>

<p>Here&#8217;s how you can set a form field to autofocus:

<pre><code>&lt;form>
  &lt;input name="q" <mark>autofocus</mark>>
  &lt;input type="submit" value="Search">
&lt;/form></code></pre>

<p>Browsers that don&#8217;t support the <code>autofocus</code> attribute will simply ignore it. <a href=examples/input-autofocus.html>See whether your browser supports autofocus fields</a>.

<p>What&#8217;s that? You say you want your autofocus fields to work in all browsers, not just these fancy-pants <abbr>HTML5</abbr> browsers? You can keep your current autofocus script. Just make two small changes:

<ol>
<li>Add the <code>autofocus</code> attribute to your <abbr>HTML</abbr> markup
<li><a href=detect.html#input-autofocus>Detect whether the browser supports the <code>autofocus</code> attribute</a>, and only run your own autofocus script if the browser doesn&#8217;t support autofocus natively.
</ol>

<p class="legend top" style="margin-left:10em"><span class=arrow>&#x21b6;</span> Autofocus with fallback
<pre><code>&lt;form name="f">
  &lt;input id="q" <mark>autofocus</mark>>
  &lt;input type="submit" value="Go">
&lt;/form>
&hellip;
&lt;script>
  window.onload = function() {
    if (<mark>!("autofocus" in document.createElement("input"))</mark>) {
      document.getElementById("q").focus();
    }
  }
&lt;/script></code></pre>

<p><a href=examples/input-autofocus-with-fallback.html>See an example of <code>autofocus</code> with fallback</a>.

<div class="pf clear">
<h4>Professor Markup Says</h4>
<div class=inner>
<blockquote class=note>
<p><code>window.onload</code> fires <em>after</em> all your images have loaded. If your page has a lot of images, the above script could potentially re-focus the "q" field after the user has started interacting with another part of your page. (This is why power users hate autofocus scripts.) If your site already uses a JavaScript library like jQuery, you can mitigate this delay by using <a href="http://docs.jquery.com/Tutorials:Introducing_$(document).ready()"><code>$(document).ready()</code></a> instead of <code>window.onload</code>.
</blockquote>
</div>
</div>

<p class=a>&#x2042;

<h2 id=type-email>Email Addresses</h2>

<p>For over a decade, web forms comprised just a few kinds of fields. The most common kinds were

<table class=st>
<tr class=ho><th>Field Type<th><abbr>HTML</abbr> Code<th>Notes
<tr><th>checkbox</th><td><code>&lt;input type="checkbox"></code><td>can be toggled on or off
<tr class=zebra><th>radio button</th><td><code>&lt;input type="radio"></code><td>can be grouped with other inputs
<tr><th>password field</th><td><code>&lt;input type="password"></code><td>echos dots instead of characters as you type
<tr class=zebra><th>drop-down lists</th><td><code>&lt;select>&lt;option>&hellip;</code><td>
<tr><th>file picker</th><td><code>&lt;input type="file"></code><td>pops up an &#8220;open file&#8221; dialog
<tr class=zebra><th>submit button</th><td><code>&lt;input type="submit"></code><td>
<tr><th>plain text</th><td><code>&lt;input type="text"></code><td>the <code>type</code> attribute can be omitted
</table>

<p>All of these input types still work in <abbr>HTML5</abbr>. If you&#8217;re &#8220;upgrading to <abbr>HTML5</abbr>&#8221; (perhaps by <a href=semantics.html#the-doctype>changing your DOCTYPE</a>), you don&#8217;t need to make a single change to your web forms. Hooray for backward compatibility!

<p>However, <abbr>HTML5</abbr> defines several new field types, and as for reasons that will become clear in a moment, there is no reason <em>not</em> to start using them.

<p>The first of these new input types is for <a href=http://www.whatwg.org/specs/web-apps/current-work/multipage/states-of-the-type-attribute.html#e-mail-state>email addresses</a>. It looks like this:

<pre><code>&lt;form>
  <mark>&lt;input type="email"></mark>
  &lt;input type="submit" value="Go">
&lt;/form></code></pre>

<p>I was about to write a sentence that started with &#8220;in browsers that don&#8217;t support <code>type="email"</code>&hellip;&#8221; but I stopped myself. Why? Because I&#8217;m not sure what it would mean to say that a browser doesn&#8217;t support <code>type="email"</code>. All browsers &#8220;support&#8221; <code>type="email"</code>. They may not do anything special with it (you&#8217;ll see a few examples of special treatment in a moment), but browsers that don&#8217;t recognize <code>type="email"</code> will treat it as <code>type="text"</code> and render it as a plain text field.

<p>I can not emphasize how important this is. The web has millions of forms that ask you to enter an email address, and all of them use <code>&lt;input type="text"></code>. You see a text box, you type your email address in the text box, and that&#8217;s that. Along comes <abbr>HTML5</abbr>, which defines <code>type="email"</code>. Do browsers freak out? No. Every single browser on Earth treats an unknown <code>type</code> attribute as <code>type="text"</code> &mdash; even IE 6. So you can &#8220;upgrade&#8221; your web forms to use <code>type="email"</code> right now.

<p>What would it mean to say that a browser <em>DID</em> support <code>type="email"</code>? Well, it can mean any number of things. The <abbr>HTML5</abbr> specification doesn&#8217;t mandate any particular user interface for the new input types. Opera styles the form field with a small email icon. Other <abbr>HTML5</abbr> browsers like Safari and Chrome simply render it as a text box &mdash; exactly like <code>type="text"</code> &mdash; so your users will never know the difference (unless they view-source).

<p>And then there&#8217;s the iPhone.

<p>The iPhone does not have a physical keyboard. All &#8220;typing&#8221; is done by tapping on an on-screen keyboard that pops up at appropriate times, like when you focus a form field in a web page. Apple did something very clever in the iPhone&#8217;s web browser. It recognizes several of the new <abbr>HTML5</abbr> input types, and <em>dynamically changes the on-screen keyboard</em> to optimize for that kind of input.

<p>For example, email addresses are text, right? Sure, but they&#8217;re a special kind of type. For example, virtually all email addresses contain the <code>@</code> sign and at least one period (<code>.</code>), but they&#8217;re unlikely to contain any spaces. So when you use an iPhone and focus an <code>&lt;input type="email"></code> element, you get an on-screen keyboard that contains a smaller-than-usual space bar, plus dedicated keys for the <code>@</code> and <code>.</code> characters.

<p class=c><img src=i/input-type-email.png alt="iPhone rendering input type=email field" title="note the dedicated @ and . keys next to the space bar" width=222 height=333 class=fr><br><a href=examples/input-type-email.html>Test <code>type="email"</code> for yourself</a>.

<p>To sum up: there&#8217;s no downside to converting all your email address form fields to <code>type="email"</code> immediately. Virtually no one will even notice, except iPhone users, who probably won&#8217;t notice either. But the ones who do notice will smile quietly and thank you for making their web experience just a little easier.

<p class=a>&#x2042;

<h2 id=type-url>Web Addresses</h2>

<p>FIXME this works on iPhone (see screenshot); Opera shows a small in-field "favorites" icon

<p class=c><img src=i/input-type-url.png alt="iPhone rendering input type=url field" width=222 height=333 class=fr>

<p class=a>&#x2042;

<h2 id=type-number>Numbers</h2>

<p>FIXME works on iPhone (see screenshot); Opera renders as spinbox control

<p class=c><img src=i/input-type-number.png alt="iPhone rendering input type=number field" width=222 height=333 class=fr>

<p class=a>&#x2042;

<h2 id=type-tel>Telephone Numbers</h2>

<p>FIXME works on iPhone (see screenshot); seems to have no effect on any desktop browser (including Opera)

<p class=c><img src=i/input-type-tel.png alt="iPhone rendering input type=tel field" width=222 height=333 class=fr>

<p class=a>&#x2042;

<h2 id=type-search>Search Boxes</h2>

<p>OK, this one is subtle. Well, the idea is simple enough, but the implementations may require some explanation. Here goes&hellip;

<p>Search. Not just Google Search or Yahoo Search. (Well, those too.) Think of any search box, on any page, on any site. Amazon has a search box. Newegg has a search box. Most blogs have a search box. How are they marked up? <code>&lt;input type="text"></code>, just like every other text box on the web. Let&#8217;s fix that.

<pre style="float:left"><code>&lt;form>
  &lt;input name="q" <mark>type="search"</mark>>
  &lt;input type="submit" value="Find">
&lt;/form></code></pre>
<p class="legend right" style="margin-top:2.75em"><span class=arrow>&nbsp;&#x21dc;</span> New-age search box

<p class="clear"><a href=examples/input-type-search.html>Test <code>&lt;input type="search"></code> in your own browser</a>. You probably won&#8217;t see any difference from a regular text box. But this is what it looks like on the iPhone:

<p class=c><img src=i/input-type-search.png alt="iPhone rendering input type=search field" width=222 height=333 class=fr>

<p>Can you spot the difference in the iPhone screenshot? It&#8217;s subtle. The on-screen keyboard is just a regular layout &mdash; no optimizations or special keys. On a normal <code>type="text"</code> field, the keyboard would have a blue button labeled &#8220;Go&#8221; in the bottom-right corner. But on a <code>type="search"</code> field, the button changes to read &#8220;Search&#8221; instead. Hey, I told you it was subtle.

<p>As with all the other new input types, browsers that don&#8217;t recognize <code>type="search"></code> will treat it like <code>type="text"</code>, so there is absolutely no reason not to start using <code>type="search"</code> for all your search boxes today.

<p class=a>&#x2042;

<h2 id=type-range>Sliders</h2>

<p>FIXME this actually works in Safari, Chrome, and Opera (need screenshots)

<p class=a>&#x2042;

<h2 id=type-date>Date Pickers</h2>

<p><abbr>HTML</abbr> 4 did not include a date picker control. Various JavaScript frameworks have picked up the slack (<a href=http://docs.dojocampus.org/dijit/form/DateTextBox>Dojo</a>, <a href=http://docs.jquery.com/UI/Datepicker>jQuery UI</a>, <a href=http://developer.yahoo.com/yui/calendar/>YUI</a>, <a href=http://closure-library.googlecode.com/svn/trunk/closure/goog/docs/class_goog_ui_DatePicker.html>Closure Library</a>), but of course each of these solutions requires &#8220;buying into&#8221; the framework on which the date picker is built.

<p><abbr>HTML5</abbr> finally defines a way to include a native date picker control without having to script it yourself. In fact, it defines six: date, month, week, time, date + time, and date + time - timezone.

<p>So far, support is&hellip; sparse.

<table class=bc>
<caption>Date picker support</caption>
<thead>
<tr><th style="text-align:left">Input Type<th title="Internet Explorer 8">IE8<th title="Internet Explorer 7">IE7<th title="Firefox 3.5">Fx3.5<th title="Firefox 3.0">Fx3.0<th title="Safari 4">Saf4<th title="Safari 3">Saf3<th title="Google Chrome 3">Chrome<th title="Opera 10">Opera
</thead>
<tbody>
<tr><th><code>type="date"</code><td>&middot;<td>&middot;<td>&middot;<td>&middot;<td>&middot;<td>&middot;<td>&middot;<td>&#x2713;
<tr><th><code>type="month"</code><td>&middot;<td>&middot;<td>&middot;<td>&middot;<td>&middot;<td>&middot;<td>&middot;<td>&#x2713;
<tr><th><code>type="week"</code><td>&middot;<td>&middot;<td>&middot;<td>&middot;<td>&middot;<td>&middot;<td>&middot;<td>&#x2713;
<tr><th><code>type="time"</code><td>&middot;<td>&middot;<td>&middot;<td>&middot;<td>&middot;<td>&middot;<td>&middot;<td>&#x2713;
<tr><th><code>type="datetime"</code><td>&middot;<td>&middot;<td>&middot;<td>&middot;<td>&middot;<td>&middot;<td>&middot;<td>&#x2713;
<tr><th><code>type="datetime-local"</code><td>&middot;<td>&middot;<td>&middot;<td>&middot;<td>&middot;<td>&middot;<td>&middot;<td>&#x2713;
</tbody>
</table>

<p>That&#8217;s a whole lotta nothin&#8217;&hellip; except for Opera. Go Opera!

<p>This is how Opera renders <a href=examples/input-type-date.html><code>&lt;input type="date"></code></a>:

<blockquote>
<p><img src=i/input-type-date.png alt="Opera's type=date picker" width=210 height=190>
</blockquote>

<p>If you need a time to go with that date, Opera also supports <a href=examples/input-type-datetime.html><code>&lt;input type="datetime"></code></a>:

<blockquote>
<p><img src=i/input-type-datetime.png alt="Opera's type=datetime picker" width=225 height=191>
</blockquote>

<p>If you only need a month + year (perhaps a credit card expiration date), Opera can render a <a href=examples/input-type-month.html><code>&lt;input type="month"></code></a>:

<blockquote>
<p><img src=i/input-type-month.png alt="Opera's type=month picker" width=210 height=189>
</blockquote>

<p>Less common, but also available, is the ability to pick a specific week of a year with <a href=examples/input-type-week.html><code>&lt;input type="week"></code></a>:

<blockquote>
<p><img src=i/input-type-week.png alt="Opera's type=week picker" width=210 height=191>
</blockquote>

<p>Last but not least, you can pick a time with <a href=examples/input-type-week.html><code>&lt;input type="time"></code></a>:

<blockquote>
<p><img src=i/input-type-time.png alt="Opera's type=time picker" width=98 height=22>
</blockquote>

<p>It&#8217;s likely that other browsers will eventually support these input types. But just like <a href=#type-email><code>type="email"</code></a> and the other input types, these form fields will be rendered as plain text boxes in browsers that don&#8217;t recognize <code>type="date"</code> and the other variants. If you like, you simply use <code>&lt;input type="date"></code> and friends, make Opera users happy, and wait for other browsers to catch up. More realistically, you can use <code>&lt;input type="date"></code>, <a href=detect.html#input-types>detect whether the browser has native support for date pickers</a>, and fall back to a scripted solution of your choice (<a href=http://docs.dojocampus.org/dijit/form/DateTextBox>Dojo</a>, <a href=http://docs.jquery.com/UI/Datepicker>jQuery UI</a>, <a href=http://developer.yahoo.com/yui/calendar/>YUI</a>, <a href=http://closure-library.googlecode.com/svn/trunk/closure/goog/docs/class_goog_ui_DatePicker.html>Closure Library</a>, or some other solution).

<p class="legend top" style="margin-left:6em"><span class=arrow>&#x21b6;</span> Date picker with fallback
<pre><code>&lt;form>
  &lt;input type="date">
&lt;/form>
...
&lt;script>
  var i = document.createElement("input");
  i.setAttribute("type", "date");
  if (i.type == "text") {
    // No native date picker support :(
    // Use Dojo/jQueryUI/YUI/Closure to create one,
    // then dynamically replace that &lt;input> element.
  }
&lt;/script></code></pre>

<p class=a>&#x2042;

<h2 id=type-color>Color Pickers</h2>

<p><abbr>HTML5</abbr> also defines <a href=http://www.whatwg.org/specs/web-apps/current-work/multipage/number-state.html#color-state><code>&lt;input type="color"></code></a>, which lets you pick a color and returns the color&#8217;s hexadecimal representation. No browser supports it yet, which is a shame, because I&#8217;ve always loved <a href=http://earthlingsoft.net/ssp/blog/2006/04/colour_me_picked>the Mac OS color picker</a>.

<p class=a>&#x2042;

<h2 id=stuff-that-doesnt-work-yet>More stuff that doesn&#8217;t work</h2>

<p>FIXME short intro about stuff that doesn&#8217;t work yet, like

<ul>
<li>&lt;input required>
<li>&lt;input pattern>
</ul>

<p>...and maybe move some of the input types here too

<p class=a>&#x2042;

<h2 id=further-reading>Further Reading</h2>

<p>Specifications and standards:

<ul>
<li><a href=http://www.whatwg.org/specs/web-apps/current-work/multipage/states-of-the-type-attribute.html#states-of-the-type-attribute><code>&lt;input></code> types</a>
<li><a href=http://www.whatwg.org/specs/web-apps/current-work/multipage/common-input-element-attributes.html#the-placeholder-attribute>the <code>&lt;input placeholder></code> attribute</a>
<li><a href=http://www.whatwg.org/specs/web-apps/current-work/multipage/association-of-controls-and-forms.html#autofocusing-a-form-control>the <code>&lt;input autofocus></code> attribute</a>
</ul>

<p>JavaScript libraries:

<ul>
<li><a href=http://www.modernizr.com/>Modernizr</a>, an <abbr>HTML5</abbr> detection library
</ul>

<p class=a>&#x2042;

<div class=pf>
<h4>Did You Know?</h4>
<div class=moneybags>
<blockquote><p>In association with O&#8217;Reilly, Google Press will be publishing this book in a variety of formats, including paper, Kindle, and <abbr>DRM</abbr>-free <abbr>PDF</abbr>. The printed book will be called &#8220;HTML5: Up &amp; Running,&#8221; and we hope to release it by next February. This chapter will be included in the print edition.
<p>If you liked this chapter and want to show your appreciation, you can <a href="http://www.amazon.com/HTML5-Up-Running-Mark-Pilgrim/dp/0596806027?ie=UTF8&amp;tag=diveintomark-20&amp;creativeASIN=0596806027">pre-order &#8220;HTML5: Up &amp; Running&#8221; with this affiliate link</a>. You&#8217;ll get a book, and I&#8217;ll get a buck. I do not currently accept direct donations.
</blockquote>
</div>
</div>

<p class=c>Copyright MMIX O&#8217;Reilly Media &bull; written by <a href=about.html>Mark Pilgrim</a>

<form action=http://www.google.com/cse><div><input type=hidden name=cx value=014021643941856155761:6jgee_nxreo><input type=hidden name=ie value=UTF-8><input type=search name=q size=25 placeholder="powered by Google&trade;">&nbsp;<input type=submit name=sa value=Search></div></form>
</div>
<script src=j/jquery.js></script>
<script src=j/modernizr.js></script>
<script src=j/dih5.js></script>
